{% extends "base.html" %}
{% block title %}Add Vendor{% endblock %}
{% block content %}
<h2>Add Vendor</h2>
<form id="vendorForm">
  <div class="form-group">
    <label>Vendor Name</label>
    <input type="text" id="vendor_name" class="form-control" required>
  </div>
  <div class="form-group">
    <label>Website URL</label>
    <input type="url" id="website_url" class="form-control" required>
  </div>
  <button type="submit" class="btn btn-primary">Add Vendor</button>
</form>
<div id="vendorMessage" class="mt-2"></div>
{% endblock %}
{% block extra_js %}
<script>
document.getElementById('vendorForm').onsubmit = function(e){
  e.preventDefault();
  fetch('/vendors', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({
      vendor_name: document.getElementById('vendor_name').value,
      website_url: document.getElementById('website_url').value
    })
  })
  .then(r => r.json())
  .then(res => {
    document.getElementById('vendorMessage').innerHTML = '<div class="alert alert-success">'+res.message+'</div>';
    document.getElementById('vendorForm').reset();
  })
  .catch(()=> document.getElementById('vendorMessage').innerHTML = '<div class="alert alert-danger">Failed to add vendor</div>');
};
</script>
{% endblock %}