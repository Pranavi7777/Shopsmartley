{% extends "base.html" %}
{% block title %}Add User{% endblock %}
{% block content %}
<h2>Add User</h2>
<form id="userForm">
  <div class="form-group">
    <label>User Name</label>
    <input type="text" id="user_name" class="form-control" required>
  </div>
  <div class="form-group">
    <label>Email</label>
    <input type="email" id="email" class="form-control" required>
  </div>
  <div class="form-group">
    <label>Mobile Number</label>
    <input type="text" id="mobile_number" class="form-control">
  </div>
  <div class="form-group">
    <label>Address</label>
    <textarea id="address" class="form-control"></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Add User</button>
</form>
<div id="userMessage" class="mt-2"></div>
{% endblock %}
{% block extra_js %}
<script>
document.getElementById('userForm').addEventListener('submit', function(e){
  e.preventDefault();
  const data = {
    user_name: document.getElementById('user_name').value,
    email: document.getElementById('email').value,
    mobile_number: document.getElementById('mobile_number').value,
    address: document.getElementById('address').value
  };
  fetch('/users', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify(data)
  })
  .then(r => r.json())
  .then(res => {
    document.getElementById('userMessage').innerHTML = '<div class="alert alert-success">'+res.message+'</div>';
    document.getElementById('userForm').reset();
  })
  .catch(()=> document.getElementById('userMessage').innerHTML = '<div class="alert alert-danger">Failed to add user</div>');
});
</script>
{% endblock %}